{% extends "layout.html" %}
{% block content %}
  <header>
    <!-- NAVBAR (FIXED) -->
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
       <ul class="navbar-nav mr-auto">
        <li><a class="navbar-brand" href="#">e14a Team Project</a></li>
        <li><button type="button" class="btn btn-success" data-toggle="modal" data-target="#aboutModal">About</button></li>
      </ul>
      <!-- TODO: Add verbose map descriptions based on selection + full map description names (instead of abbrs like pop15) -->
      <form class="form-inline mt-2 mt-md-0">
        <div class="btn-group btn-group-toggle center" data-toggle="buttons">
          <button type="button" class="btn btn-primary" disabled>Select Map:</button>
          {% for key, value in map_options.items() %}
            <label class="btn btn-primary my-2 my-sm-0 {% if key == map_options[0] %} active {% endif %}" >
              <input
                type="radio"
                name="map_selection"
                id="map_option"
                autocomplete="off"
                value="{{key}}"
                {% if map_option == map_options[0] %} checked{% endif %} >
              {{ value }}
            </label>
          {% endfor %}
        </div>
      </form>
    </nav>
  </header>
  <!-- MAIN CONTENT -->
   <main role="main" class="col-md-12">
    <div class="row">
      <div class="col-md-12">
        <div class="row map-view mx-1 my-3">
          <div class="col-md-8 text-center">
              <h1>How does food access affect the health of <span class="pred_calc_selected_county">the country</span>?</h1>
              <div id="food-atlas-map"></div>
          </div>
          <!-- TODO: dynamically load state and county forms below using backend data -->
          <!-- TODO: connect Calculate and Reset buttons to predictions and map regeneration -->
          <!-- PREDICTION CALCULATOR SIDEBAR -->
          <div class="col-md-4">
            <div class="card">
              <div class="card-header text-center">
                <h3 class="my-0">Prediction Calculator</h3>
              </div>
              <div class="card-body prediction-calculator">
                <div class="row">
                  <div class="col">
                    <p class="pred-calc-desc">Take the data further. What would X look like if we predicted it based on values from <span class="pred_calc_selected_county">(select county)</span>?</p>
                    <input type="hidden" name="selected_state" class="form-control" id="selected_state">
                    <input type="hidden" name="selected_county" class="form-control" id="selected_county">
                  </div>
                  </div>

                <hr class="pred_calc_top_hr">
                <div class="form-group row">
                  <label for="input_1" class="col-8 col-form-label">Fast Food (%):</label>
                  <input type="text" class="form-control col-3" name="input_1" id="input_1">
                </div>

                <div class="form-group row">
                  <label for="input_2" class="col-8 col-form-label">Farmers' Markets per 1000:</label>
                  <input type="text" class="form-control col-3" name="input_2" id="input_2">
                </div>
                <div class="form-group row">
                  <label for="input_3" class="col-8 col-form-label">Food Tax Rate (%):</label>
                  <input type="text" class="form-control col-3" name="input_3" id="input_3">
                </div>

                <br>
                <button type="button" class="btn btn-primary">Calculate</button>
                <button type="button" class="btn btn-default">Reset</button>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col text-center">
            <h2>Deep Dives for <span class="pred_calc_selected_county">the US</h2>
            <div class="card-deck text-center mx-auto">
              <div class="card shadow-sm">
                <div class="card-header">
                  <h3 class="my-0">Fast Food</h3>
                </div>
                <div class="card-body card-deep-dive">
                  <svg id='deep_dive_1_svg' width="365" height="200"></svg>
                </div>
              </div>
              <div class="card shadow-sm">
                <div class="card-header">
                  <h3 class="my-0">Farmer's Markets per 1000</h3>
                </div>
                <div class="card-body card-deep-dive">
                  <svg id='deep_dive_2_svg' width="365" height="200"></svg>
                </div>
              </div>
              <div class="card shadow-sm">
                <div class="card-header">
                  <h3 class="my-0">Food Tax Rate</h3>
                </div>
                <div class="card-body card-deep-dive">
                  <svg id='deep_dive_3_svg' width="365" height="200"></svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- About Modal -->
<div class="modal fade" id="aboutModal" tabindex="-1" role="dialog" aria-labelledby="aboutModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="aboutModalLabel">About This Project</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>This project was created by Tushal Desai, Rebecca Larson, Gabe Mansur, and Rachael Serur for Harvard CSCI E-14a class.</p>
        <p>
          Our project derive insights about food distribution and the availability of healthy eating options in the US using data from the <a href="https://catalog.data.gov/dataset/food-environment-atlas-f4a22" target="_blank">USDA Food Environment Atlas</a>.
        </p>
        <h5>About the Visualizations</h5>
        <ul>
          <li><strong>US Map</strong>: This visualization takes d3-geo-driven US county map data and renders choropleths based on selected Food Atlas data topics. It is connected to the prediction calculator and deep dive graphs and acts as a form of navigation for them.</li>
          <li><strong>Fast Food per 1000 & Obesity</strong>: This is a scatterplot looking at the connection of the number of fast food restaurants per 1000/pop and percent of the population with low access to food (radius) to obesity. This chart will also be iterated on to include visual distinctions between metro and non metro counties. The goal is to give the user an understanding of demographics of a county that may influence the presence of fast food restaurants, and how that impacts the county's health.</li>
          <li><strong>Farmer's Markets per 1000 & Obesity</strong>: This is a scatterplot looking at the number of Farmer's Markets per 1000/pop and obesity. The size of the circle radius reflects the percent of the population with low access to food sources.</li>
          <li><strong>Food Tax Rate & Obesity</strong>: This is a scatterplot looking at the food tax rate and obesity. The size of the circle radius reflects the percent of the population with low access to food sources.</li>
        </ul>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}
